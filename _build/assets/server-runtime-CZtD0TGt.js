import{e as M,t as ue,f as ee,y as z,g as te,s as A,a as ce,r as de}from"./solid-z68Z1Ghi.js";import{l as le,o as fe,m as pe,p as ve}from"./routing-CypKlUTf.js";import{j as he}from"./web-DHYkzEvn.js";const ye="Location",me=5e3,be=18e4;let w=new Map;setInterval(()=>{const e=Date.now();for(let[t,r]of w.entries())!r[3].count&&e-r[0]>be&&w.delete(t)},3e5);function C(){return w}function ge(e,t=!0){return z(()=>{const r=Date.now();re(e,i=>{t&&(i[0]=0),i[3][1](r)})})}function re(e,t){e&&!Array.isArray(e)&&(e=[e]);for(let r of w.keys())(e===void 0||we(r,e))&&t(w.get(r))}function U(e,t){e.GET&&(e=e.GET);const r=(...i)=>{const a=C(),n=fe(),s=te()?le():void 0,c=Date.now(),d=t+$(i);let u=a.get(d),h;if(ue()&&!he&&(h=!0,ee(()=>u[3].count--)),u&&(n==="native"||u[0]&&u[3].count||Date.now()-u[0]<me)){h&&(u[3].count++,u[3][0]()),u[2]==="preload"&&n!=="preload"&&(u[0]=c);let S=u[1];return n!=="preload"&&(S="then"in u[1]?u[1].then(f(!1),f(!0)):f(!1)(u[1]),n==="navigate"&&z(()=>u[3][1](u[0]))),S}let l=A.context&&A.has(d)?A.load(d):e(...i);return u?(u[0]=c,u[1]=l,u[2]=n,n==="navigate"&&z(()=>u[3][1](u[0]))):(a.set(d,u=[c,l,n,M(c)]),u[3].count=0),h&&(u[3].count++,u[3][0]()),n!=="preload"&&(l="then"in l?l.then(f(!1),f(!0)):f(!1)(l)),l;function f(S){return async p=>{if(p instanceof Response){if(p.headers.has("Location")){s&&z(()=>{let m=p.headers.get(ye);m&&m.startsWith("/")?s(m,{replace:!0}):m&&(window.location.href=m)});return}p.customBody&&(p=await p.customBody())}if(S)throw p;return p}}};return r.keyFor=(...i)=>t+$(i),r.key=t,r}U.set=(e,t)=>{const r=C(),i=Date.now();let a=r.get(e);a?(a[0]=i,a[1]=t,a[2]="preload"):(r.set(e,a=[i,t,,M(i)]),a[3].count=0)};U.clear=()=>C().clear();function we(e,t){for(let r of t)if(e.startsWith(r))return!0;return!1}function $(e){return JSON.stringify(e,(t,r)=>Se(r)?Object.keys(r).sort().reduce((i,a)=>(i[a]=r[a],i),{}):r)}function Se(e){let t;return e!=null&&typeof e=="object"&&(!(t=Object.getPrototypeOf(e))||t===Object.prototype)}const V=new Map;function Ee(e,t){const r=ve(),i=ce(()=>r.submissions[0]().filter(a=>a.url===e.toString()&&(!t||t(a.input))));return new Proxy([],{get(a,n){return n===de?i():n==="pending"?i().some(o=>!o.result):i()[n]}})}function Ht(e,t){const r=Ee(e,t);return new Proxy({},{get(i,a){return r[r.length-1]?.[a]}})}function Xt(e,t){function r(...a){const n=this,o=(n.singleFlight&&e.withOptions?e.withOptions({headers:{"X-Single-Flight":"true"}}):e)(...a),[s,c]=M();let d;async function u(h){const l=await ze(h,n.navigatorFactory());return l?c({data:l}):d.clear(),l}return n.submissions[1](h=>[...h,d={input:a,url:i,get result(){return s()?.data},get pending(){return!s()},clear(){n.submissions[1](l=>l.filter(f=>f.input!==a))},retry(){return c(void 0),e(...a).then(u,u)}}]),o.then(u,u)}const i=e.url||t&&`https://action/${t}`||`https://action/${Re(e.toString())}`;return ie(r,i)}function ie(e,t){return e.toString=()=>{if(!t)throw new Error("Client Actions need explicit names if server rendered");return t},e.with=function(...r){const i=function(...n){return e.call(this,...r,...n)},a=new URL(t,pe);return a.searchParams.set("args",$(r)),ie(i,(a.origin==="https://action"?a.origin:"")+a.pathname+a.search)},e.url=t,V.set(t,e),te()&&ee(()=>V.delete(t)),e}const Re=e=>e.split("").reduce((t,r)=>(t<<5)-t+r.charCodeAt(0)|0,0);async function ze(e,t){let r,i,a;if(e instanceof Response){if(e.headers.has("X-Revalidate")&&(i=a=e.headers.get("X-Revalidate").split(",")),e.customBody&&(r=await e.customBody(),e.headers.has("X-Single-Flight")&&(i||(i=[]),a||(a=[]),Object.keys(r).forEach(n=>{n!=="_$value"&&(i.push(n),U.set(n,r[n]))}),r=r._$value)),e.headers.has("Location")){const n=e.headers.get("Location")||"/";n.startsWith("http")?window.location.href=n:t(n)}}else r=e;return re(a,n=>n[0]=0),await ge(i,!1),r}var xe=(e=>(e[e.AggregateError=1]="AggregateError",e[e.ArrowFunction=2]="ArrowFunction",e[e.ErrorPrototypeStack=4]="ErrorPrototypeStack",e[e.ObjectAssign=8]="ObjectAssign",e[e.BigIntTypedArray=16]="BigIntTypedArray",e))(xe||{});function k(e,t){if(!e)throw t}function Ae(e){switch(e){case'"':return'\\"';case"\\":return"\\\\";case`
`:return"\\n";case"\r":return"\\r";case"\b":return"\\b";case"	":return"\\t";case"\f":return"\\f";case"<":return"\\x3C";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:return}}function y(e){let t="",r=0,i;for(let a=0,n=e.length;a<n;a++)i=Ae(e[a]),i&&(t+=e.slice(r,a)+i,r=a+1);return r===0?t=e:t+=e.slice(r),t}var E="__SEROVAL_REFS__",ae=new Map,R=new Map;function j(e){return ae.has(e)}function Oe(e){return k(j(e),new ft(e)),ae.get(e)}typeof globalThis<"u"?Object.defineProperty(globalThis,E,{value:R,configurable:!0,writable:!1,enumerable:!1}):typeof window<"u"?Object.defineProperty(window,E,{value:R,configurable:!0,writable:!1,enumerable:!1}):typeof self<"u"?Object.defineProperty(self,E,{value:R,configurable:!0,writable:!1,enumerable:!1}):typeof global<"u"&&Object.defineProperty(global,E,{value:R,configurable:!0,writable:!1,enumerable:!1});function ne(e,t){for(let r=0,i=t.length;r<i;r++){let a=t[r];e.has(a)||(e.add(a),a.extends&&ne(e,a.extends))}}function Fe(e){if(e){let t=new Set;return ne(t,e),[...t]}}var se={[Symbol.asyncIterator]:0,[Symbol.hasInstance]:1,[Symbol.isConcatSpreadable]:2,[Symbol.iterator]:3,[Symbol.match]:4,[Symbol.matchAll]:5,[Symbol.replace]:6,[Symbol.search]:7,[Symbol.species]:8,[Symbol.split]:9,[Symbol.toPrimitive]:10,[Symbol.toStringTag]:11,[Symbol.unscopables]:12},Ie={0:"Error",1:"EvalError",2:"RangeError",3:"ReferenceError",4:"SyntaxError",5:"TypeError",6:"URIError"};function v(e){return{t:2,i:void 0,s:e,l:void 0,c:void 0,m:void 0,p:void 0,e:void 0,a:void 0,f:void 0,b:void 0,o:void 0}}var W=v(2),K=v(3),Pe=v(1),Te=v(0),$e=v(4),ke=v(5),je=v(6),Me=v(7);function _(e){return e instanceof EvalError?1:e instanceof RangeError?2:e instanceof ReferenceError?3:e instanceof SyntaxError?4:e instanceof TypeError?5:e instanceof URIError?6:0}function Ce(e){let t=Ie[_(e)];return e.name!==t?{name:e.name}:e.constructor.name!==t?{name:e.constructor.name}:{}}function q(e,t){let r=Ce(e),i=Object.getOwnPropertyNames(e);for(let a=0,n=i.length,o;a<n;a++)o=i[a],o!=="name"&&o!=="message"&&(o==="stack"?t&4&&(r=r||{},r[o]=e[o]):(r=r||{},r[o]=e[o]));return r}function oe(e){return Object.isFrozen(e)?3:Object.isSealed(e)?2:Object.isExtensible(e)?0:1}function Ue(e){switch(e){case 1/0:return ke;case-1/0:return je}return e!==e?Me:Object.is(e,-0)?$e:{t:0,i:void 0,s:e,l:void 0,c:void 0,m:void 0,p:void 0,e:void 0,a:void 0,f:void 0,b:void 0,o:void 0}}function G(e){return{t:1,i:void 0,s:y(e),l:void 0,c:void 0,m:void 0,p:void 0,e:void 0,a:void 0,f:void 0,b:void 0,o:void 0}}function _e(e){return{t:3,i:void 0,s:""+e,l:void 0,c:void 0,m:void 0,p:void 0,e:void 0,a:void 0,f:void 0,b:void 0,o:void 0}}function De(e){return{t:4,i:e,s:void 0,l:void 0,c:void 0,m:void 0,p:void 0,e:void 0,a:void 0,f:void 0,b:void 0,o:void 0}}function Le(e,t){return{t:5,i:e,s:t.toISOString(),l:void 0,c:void 0,m:void 0,p:void 0,e:void 0,f:void 0,a:void 0,b:void 0,o:void 0}}function Be(e,t){return{t:6,i:e,s:void 0,l:void 0,c:y(t.source),m:t.flags,p:void 0,e:void 0,a:void 0,f:void 0,b:void 0,o:void 0}}function Ne(e,t){let r=new Uint8Array(t),i=r.length,a=new Array(i);for(let n=0;n<i;n++)a[n]=r[n];return{t:19,i:e,s:a,l:void 0,c:void 0,m:void 0,p:void 0,e:void 0,a:void 0,f:void 0,b:void 0,o:void 0}}function Ve(e,t){return{t:17,i:e,s:se[t],l:void 0,c:void 0,m:void 0,p:void 0,e:void 0,a:void 0,f:void 0,b:void 0,o:void 0}}function H(e,t){return{t:18,i:e,s:y(Oe(t)),l:void 0,c:void 0,m:void 0,p:void 0,e:void 0,a:void 0,f:void 0,b:void 0,o:void 0}}function We(e,t,r){return{t:25,i:e,s:r,l:void 0,c:y(t),m:void 0,p:void 0,e:void 0,a:void 0,f:void 0,b:void 0,o:void 0}}function Ke(e,t,r){return{t:9,i:e,s:void 0,l:t.length,c:void 0,m:void 0,p:void 0,e:void 0,a:r,f:void 0,b:void 0,o:oe(t)}}function qe(e,t){return{t:21,i:e,s:void 0,l:void 0,c:void 0,m:void 0,p:void 0,e:void 0,a:void 0,f:t,b:void 0,o:void 0}}function Ge(e,t,r){return{t:15,i:e,s:void 0,l:t.length,c:t.constructor.name,m:void 0,p:void 0,e:void 0,a:void 0,f:r,b:t.byteOffset,o:void 0}}function He(e,t,r){return{t:16,i:e,s:void 0,l:t.length,c:t.constructor.name,m:void 0,p:void 0,e:void 0,a:void 0,f:r,b:t.byteOffset,o:void 0}}function Xe(e,t,r){return{t:20,i:e,s:void 0,l:t.byteLength,c:void 0,m:void 0,p:void 0,e:void 0,a:void 0,f:r,b:t.byteOffset,o:void 0}}function Je(e,t,r){return{t:13,i:e,s:_(t),l:void 0,c:void 0,m:y(t.message),p:r,e:void 0,a:void 0,f:void 0,b:void 0,o:void 0}}function Qe(e,t,r){return{t:14,i:e,s:_(t),l:void 0,c:void 0,m:y(t.message),p:r,e:void 0,a:void 0,f:void 0,b:void 0,o:void 0}}function Ze(e,t,r){return{t:7,i:e,s:void 0,l:t,c:void 0,m:void 0,p:void 0,e:void 0,a:r,f:void 0,b:void 0,o:void 0}}function Ye(e,t){return{t:28,i:void 0,s:void 0,l:void 0,c:void 0,m:void 0,p:void 0,e:void 0,a:[e,t],f:void 0,b:void 0,o:void 0}}function et(e,t){return{t:30,i:void 0,s:void 0,l:void 0,c:void 0,m:void 0,p:void 0,e:void 0,a:[e,t],f:void 0,b:void 0,o:void 0}}function tt(e,t,r){return{t:31,i:e,s:void 0,l:void 0,c:void 0,m:void 0,p:void 0,e:void 0,a:r,f:t,b:void 0,o:void 0}}function rt(e,t){return{t:32,i:e,s:void 0,l:void 0,c:void 0,m:void 0,p:void 0,e:void 0,a:void 0,f:t,b:void 0,o:void 0}}function it(e,t){return{t:33,i:e,s:void 0,l:void 0,c:void 0,m:void 0,p:void 0,e:void 0,a:void 0,f:t,b:void 0,o:void 0}}function at(e,t){return{t:34,i:e,s:void 0,l:void 0,c:void 0,m:void 0,p:void 0,e:void 0,a:void 0,f:t,b:void 0,o:void 0}}function nt(e){let t=[],r=-1,i=-1,a=e[Symbol.iterator]();for(;;)try{let n=a.next();if(t.push(n.value),n.done){i=t.length-1;break}}catch(n){r=t.length,t.push(n)}return{v:t,t:r,d:i}}var st={},ot={},ut={0:{},1:{},2:{},3:{},4:{}},{toString:D}=Object.prototype;function ct(e,t){return t instanceof Error?`Seroval caught an error during the ${e} process.
  
${t.name}
${t.message}

- For more information, please check the "cause" property of this error.
- If you believe this is an error in Seroval, please submit an issue at https://github.com/lxsmnsyc/seroval/issues/new`:`Seroval caught an error during the ${e} process.

"${D.call(t)}"

For more information, please check the "cause" property of this error.`}var dt=class extends Error{constructor(t,r){super(ct(t,r)),this.cause=r}},lt=class extends dt{constructor(e){super("parsing",e)}},x=class extends Error{constructor(t){super(`The value ${D.call(t)} of type "${typeof t}" cannot be parsed/serialized.
      
There are few workarounds for this problem:
- Transform the value in a way that it can be serialized.
- If the reference is present on multiple runtimes (isomorphic), you can use the Reference API to map the references.`),this.value=t}},ft=class extends Error{constructor(t){super('Missing reference for the value "'+D.call(t)+'" of type "'+typeof t+'"'),this.value=t}},pt=class{constructor(t){this.marked=new Set,this.plugins=t.plugins,this.features=31^(t.disabledFeatures||0),this.refs=t.refs||new Map}markRef(t){this.marked.add(t)}isMarked(t){return this.marked.has(t)}getIndexedValue(t){let r=this.refs.get(t);if(r!=null)return this.markRef(r),{type:1,value:De(r)};let i=this.refs.size;return this.refs.set(t,i),{type:0,value:i}}getReference(t){let r=this.getIndexedValue(t);return r.type===1?r:j(t)?{type:2,value:H(r.value,t)}:r}getStrictReference(t){k(j(t),new x(t));let r=this.getIndexedValue(t);return r.type===1?r.value:H(r.value,t)}parseFunction(t){return this.getStrictReference(t)}parseWellKnownSymbol(t){let r=this.getReference(t);return r.type!==0?r.value:(k(t in se,new x(t)),Ve(r.value,t))}parseSpecialReference(t){let r=this.getIndexedValue(ut[t]);return r.type===1?r.value:{t:26,i:r.value,s:t,l:void 0,c:void 0,m:void 0,p:void 0,e:void 0,a:void 0,f:void 0,b:void 0,o:void 0}}parseIteratorFactory(){let t=this.getIndexedValue(st);return t.type===1?t.value:{t:27,i:t.value,s:void 0,l:void 0,c:void 0,m:void 0,p:void 0,e:void 0,a:void 0,f:this.parseWellKnownSymbol(Symbol.iterator),b:void 0,o:void 0}}parseAsyncIteratorFactory(){let t=this.getIndexedValue(ot);return t.type===1?t.value:{t:29,i:t.value,s:void 0,l:void 0,c:void 0,m:void 0,p:void 0,e:void 0,a:[this.parseSpecialReference(1),this.parseWellKnownSymbol(Symbol.asyncIterator)],f:void 0,b:void 0,o:void 0}}createObjectNode(t,r,i,a){return{t:i?11:10,i:t,s:void 0,l:void 0,c:void 0,m:void 0,p:a,e:void 0,a:void 0,f:void 0,b:void 0,o:oe(r)}}createMapNode(t,r,i,a){return{t:8,i:t,s:void 0,l:void 0,c:void 0,m:void 0,p:void 0,e:{k:r,v:i,s:a},a:void 0,f:this.parseSpecialReference(0),b:void 0,o:void 0}}createPromiseConstructorNode(t){return{t:22,i:t,s:void 0,l:void 0,c:void 0,m:void 0,p:void 0,e:void 0,a:void 0,f:this.parseSpecialReference(1),b:void 0,o:void 0}}};async function vt(e){try{return[1,await e]}catch(t){return[0,t]}}function ht(e){return"__SEROVAL_STREAM__"in e}function L(){let e=new Set,t=[],r=!0,i=!1;function a(s){for(let c of e.keys())c.next(s)}function n(s){for(let c of e.keys())c.throw(s)}function o(s){for(let c of e.keys())c.return(s)}return{__SEROVAL_STREAM__:!0,on(s){r&&e.add(s);for(let c=0,d=t.length;c<d;c++){let u=t[c];c===d-1?i?s.return(u):s.throw(u):s.next(u)}return()=>{r&&e.delete(s)}},next(s){r&&(t.push(s),a(s))},throw(s){r&&(t.push(s),n(s),r=!1,i=!1,e.clear())},return(s){r&&(t.push(s),o(s),r=!1,i=!0,e.clear())}}}function yt(e){let t=L(),r=e[Symbol.asyncIterator]();async function i(){try{let a=await r.next();a.done?t.return(a.value):(t.next(a.value),await i())}catch(a){t.throw(a)}}return i().catch(()=>{}),t}var mt=class extends pt{async parseItems(e){let t=[];for(let r=0,i=e.length;r<i;r++)r in e&&(t[r]=await this.parse(e[r]));return t}async parseArray(e,t){return Ke(e,t,await this.parseItems(t))}async parseProperties(e){let t=Object.entries(e),r=[],i=[];for(let n=0,o=t.length;n<o;n++)r.push(y(t[n][0])),i.push(await this.parse(t[n][1]));let a=Symbol.iterator;return a in e&&(r.push(this.parseWellKnownSymbol(a)),i.push(Ye(this.parseIteratorFactory(),await this.parse(nt(e))))),a=Symbol.asyncIterator,a in e&&(r.push(this.parseWellKnownSymbol(a)),i.push(et(this.parseAsyncIteratorFactory(),await this.parse(yt(e))))),a=Symbol.toStringTag,a in e&&(r.push(this.parseWellKnownSymbol(a)),i.push(G(e[a]))),a=Symbol.isConcatSpreadable,a in e&&(r.push(this.parseWellKnownSymbol(a)),i.push(e[a]?W:K)),{k:r,v:i,s:r.length}}async parsePlainObject(e,t,r){return this.createObjectNode(e,t,r,await this.parseProperties(t))}async parseBoxed(e,t){return qe(e,await this.parse(t.valueOf()))}async parseTypedArray(e,t){return Ge(e,t,await this.parse(t.buffer))}async parseBigIntTypedArray(e,t){return He(e,t,await this.parse(t.buffer))}async parseDataView(e,t){return Xe(e,t,await this.parse(t.buffer))}async parseError(e,t){let r=q(t,this.features);return Je(e,t,r?await this.parseProperties(r):void 0)}async parseAggregateError(e,t){let r=q(t,this.features);return Qe(e,t,r?await this.parseProperties(r):void 0)}async parseMap(e,t){let r=[],i=[];for(let[a,n]of t.entries())r.push(await this.parse(a)),i.push(await this.parse(n));return this.createMapNode(e,r,i,t.size)}async parseSet(e,t){let r=[];for(let i of t.keys())r.push(await this.parse(i));return Ze(e,t.size,r)}async parsePromise(e,t){let[r,i]=await vt(t);return{t:12,i:e,s:r,l:void 0,c:void 0,m:void 0,p:void 0,e:void 0,a:void 0,f:await this.parse(i),b:void 0,o:void 0}}async parsePlugin(e,t){let r=this.plugins;if(r)for(let i=0,a=r.length;i<a;i++){let n=r[i];if(n.parse.async&&n.test(t))return We(e,n.tag,await n.parse.async(t,this,{id:e}))}}async parseStream(e,t){return tt(e,this.parseSpecialReference(4),await new Promise((r,i)=>{let a=[],n=t.on({next:o=>{this.markRef(e),this.parse(o).then(s=>{a.push(rt(e,s))},s=>{i(s),n()})},throw:o=>{this.markRef(e),this.parse(o).then(s=>{a.push(it(e,s)),r(a),n()},s=>{i(s),n()})},return:o=>{this.markRef(e),this.parse(o).then(s=>{a.push(at(e,s)),r(a),n()},s=>{i(s),n()})}})}))}async parseObject(e,t){if(Array.isArray(t))return this.parseArray(e,t);if(ht(t))return this.parseStream(e,t);let r=await this.parsePlugin(e,t);if(r)return r;let i=t.constructor;switch(i){case Object:return this.parsePlainObject(e,t,!1);case void 0:return this.parsePlainObject(e,t,!0);case Date:return Le(e,t);case RegExp:return Be(e,t);case Error:case EvalError:case RangeError:case ReferenceError:case SyntaxError:case TypeError:case URIError:return this.parseError(e,t);case Number:case Boolean:case String:case BigInt:return this.parseBoxed(e,t);case ArrayBuffer:return Ne(e,t);case Int8Array:case Int16Array:case Int32Array:case Uint8Array:case Uint16Array:case Uint32Array:case Uint8ClampedArray:case Float32Array:case Float64Array:return this.parseTypedArray(e,t);case DataView:return this.parseDataView(e,t);case Map:return this.parseMap(e,t);case Set:return this.parseSet(e,t)}if(i===Promise||t instanceof Promise)return this.parsePromise(e,t);let a=this.features;if(a&16)switch(i){case BigInt64Array:case BigUint64Array:return this.parseBigIntTypedArray(e,t)}if(a&1&&typeof AggregateError<"u"&&(i===AggregateError||t instanceof AggregateError))return this.parseAggregateError(e,t);if(t instanceof Error)return this.parseError(e,t);if(Symbol.iterator in t||Symbol.asyncIterator in t)return this.parsePlainObject(e,t,!!i);throw new x(t)}async parse(e){try{switch(typeof e){case"boolean":return e?W:K;case"undefined":return Pe;case"string":return G(e);case"number":return Ue(e);case"bigint":return _e(e);case"object":{if(e){let t=this.getReference(e);return t.type===0?await this.parseObject(t.value,e):t.value}return Te}case"symbol":return this.parseWellKnownSymbol(e);case"function":return this.parseFunction(e);default:throw new x(e)}}catch(t){throw new lt(t)}}},bt=class extends mt{constructor(){super(...arguments),this.mode="vanilla"}};function gt(e){return(0,eval)(e)}async function wt(e,t={}){let r=Fe(t.plugins),i=new bt({plugins:r,disabledFeatures:t.disabledFeatures});return{t:await i.parse(e),f:i.features,m:Array.from(i.marked)}}function O(e){return{detail:e.detail,bubbles:e.bubbles,cancelable:e.cancelable,composed:e.composed}}var St={tag:"seroval-plugins/web/CustomEvent",test(e){return typeof CustomEvent>"u"?!1:e instanceof CustomEvent},parse:{sync(e,t){return{type:t.parse(e.type),options:t.parse(O(e))}},async async(e,t){return{type:await t.parse(e.type),options:await t.parse(O(e))}},stream(e,t){return{type:t.parse(e.type),options:t.parse(O(e))}}},serialize(e,t){return"new CustomEvent("+t.serialize(e.type)+","+t.serialize(e.options)+")"},deserialize(e,t){return new CustomEvent(t.deserialize(e.type),t.deserialize(e.options))}},Et=St,Rt={tag:"seroval-plugins/web/DOMException",test(e){return typeof DOMException>"u"?!1:e instanceof DOMException},parse:{sync(e,t){return{name:t.parse(e.name),message:t.parse(e.message)}},async async(e,t){return{name:await t.parse(e.name),message:await t.parse(e.message)}},stream(e,t){return{name:t.parse(e.name),message:t.parse(e.message)}}},serialize(e,t){return"new DOMException("+t.serialize(e.message)+","+t.serialize(e.name)+")"},deserialize(e,t){return new DOMException(t.deserialize(e.message),t.deserialize(e.name))}},zt=Rt;function F(e){return{bubbles:e.bubbles,cancelable:e.cancelable,composed:e.composed}}var xt={tag:"seroval-plugins/web/Event",test(e){return typeof Event>"u"?!1:e instanceof Event},parse:{sync(e,t){return{type:t.parse(e.type),options:t.parse(F(e))}},async async(e,t){return{type:await t.parse(e.type),options:await t.parse(F(e))}},stream(e,t){return{type:t.parse(e.type),options:t.parse(F(e))}}},serialize(e,t){return"new Event("+t.serialize(e.type)+","+t.serialize(e.options)+")"},deserialize(e,t){return new Event(t.deserialize(e.type),t.deserialize(e.options))}},At=xt,Ot={tag:"seroval-plugins/web/File",test(e){return typeof File>"u"?!1:e instanceof File},parse:{async async(e,t){return{name:await t.parse(e.name),options:await t.parse({type:e.type,lastModified:e.lastModified}),buffer:await t.parse(await e.arrayBuffer())}}},serialize(e,t){return"new File(["+t.serialize(e.buffer)+"],"+t.serialize(e.name)+","+t.serialize(e.options)+")"},deserialize(e,t){return new File([t.deserialize(e.buffer)],t.deserialize(e.name),t.deserialize(e.options))}},Ft=Ot;function I(e){let t=[];return e.forEach((r,i)=>{t.push([i,r])}),t}var b={},It={tag:"seroval-plugins/web/FormDataFactory",test(e){return e===b},parse:{sync(){},async async(){return await Promise.resolve(void 0)},stream(){}},serialize(e,t){return t.createEffectfulFunction(["e","f","i","s","t"],"f=new FormData;for(i=0,s=e.length;i<s;i++)f.append((t=e[i])[0],t[1]);return f")},deserialize(){return b}},Pt={tag:"seroval-plugins/web/FormData",extends:[Ft,It],test(e){return typeof FormData>"u"?!1:e instanceof FormData},parse:{sync(e,t){return{factory:t.parse(b),entries:t.parse(I(e))}},async async(e,t){return{factory:await t.parse(b),entries:await t.parse(I(e))}},stream(e,t){return{factory:t.parse(b),entries:t.parse(I(e))}}},serialize(e,t){return"("+t.serialize(e.factory)+")("+t.serialize(e.entries)+")"},deserialize(e,t){let r=new FormData,i=t.deserialize(e.entries);for(let a=0,n=i.length;a<n;a++){let o=i[a];r.append(o[0],o[1])}return r}},Tt=Pt;function P(e){let t=[];return e.forEach((r,i)=>{t.push([i,r])}),t}var $t={tag:"seroval-plugins/web/Headers",test(e){return typeof Headers>"u"?!1:e instanceof Headers},parse:{sync(e,t){return t.parse(P(e))},async async(e,t){return await t.parse(P(e))},stream(e,t){return t.parse(P(e))}},serialize(e,t){return"new Headers("+t.serialize(e)+")"},deserialize(e,t){return new Headers(t.deserialize(e))}},B=$t,g={},kt={tag:"seroval-plugins/web/ReadableStreamFactory",test(e){return e===g},parse:{sync(){},async async(){return await Promise.resolve(void 0)},stream(){}},serialize(e,t){return t.createFunction(["d"],"new ReadableStream({start:"+t.createEffectfulFunction(["c"],"d.on({next:"+t.createEffectfulFunction(["v"],"c.enqueue(v)")+",throw:"+t.createEffectfulFunction(["v"],"c.error(v)")+",return:"+t.createEffectfulFunction([],"c.close()")+"})")+"})")},deserialize(){return g}};function X(e){let t=L(),r=e.getReader();async function i(){try{let a=await r.read();a.done?t.return(a.value):(t.next(a.value),await i())}catch(a){t.throw(a)}}return i().catch(()=>{}),t}var jt={tag:"seroval/plugins/web/ReadableStream",extends:[kt],test(e){return typeof ReadableStream>"u"?!1:e instanceof ReadableStream},parse:{sync(e,t){return{factory:t.parse(g),stream:t.parse(L())}},async async(e,t){return{factory:await t.parse(g),stream:await t.parse(X(e))}},stream(e,t){return{factory:t.parse(g),stream:t.parse(X(e))}}},serialize(e,t){return"("+t.serialize(e.factory)+")("+t.serialize(e.stream)+")"},deserialize(e,t){let r=t.deserialize(e.stream);return new ReadableStream({start(i){r.on({next(a){i.enqueue(a)},throw(a){i.error(a)},return(){i.close()}})}})}},N=jt;function J(e,t){return{body:t,cache:e.cache,credentials:e.credentials,headers:e.headers,integrity:e.integrity,keepalive:e.keepalive,method:e.method,mode:e.mode,redirect:e.redirect,referrer:e.referrer,referrerPolicy:e.referrerPolicy}}var Mt={tag:"seroval-plugins/web/Request",extends:[N,B],test(e){return typeof Request>"u"?!1:e instanceof Request},parse:{async async(e,t){return{url:await t.parse(e.url),options:await t.parse(J(e,e.body?await e.clone().arrayBuffer():null))}},stream(e,t){return{url:t.parse(e.url),options:t.parse(J(e,e.clone().body))}}},serialize(e,t){return"new Request("+t.serialize(e.url)+","+t.serialize(e.options)+")"},deserialize(e,t){return new Request(t.deserialize(e.url),t.deserialize(e.options))}},Ct=Mt;function Q(e){return{headers:e.headers,status:e.status,statusText:e.statusText}}var Ut={tag:"seroval-plugins/web/Response",extends:[N,B],test(e){return typeof Response>"u"?!1:e instanceof Response},parse:{async async(e,t){return{body:await t.parse(e.body?await e.clone().arrayBuffer():null),options:await t.parse(Q(e))}},stream(e,t){return{body:t.parse(e.clone().body),options:t.parse(Q(e))}}},serialize(e,t){return"new Response("+t.serialize(e.body)+","+t.serialize(e.options)+")"},deserialize(e,t){return new Response(t.deserialize(e.body),t.deserialize(e.options))}},_t=Ut,Dt={tag:"seroval-plugins/web/URLSearchParams",test(e){return typeof URLSearchParams>"u"?!1:e instanceof URLSearchParams},parse:{sync(e,t){return t.parse(e.toString())},async async(e,t){return await t.parse(e.toString())},stream(e,t){return t.parse(e.toString())}},serialize(e,t){return"new URLSearchParams("+t.serialize(e)+")"},deserialize(e,t){return new URLSearchParams(t.deserialize(e))}},Lt=Dt,Bt={tag:"seroval-plugins/web/URL",test(e){return typeof URL>"u"?!1:e instanceof URL},parse:{sync(e,t){return t.parse(e.href)},async async(e,t){return await t.parse(e.href)},stream(e,t){return t.parse(e.href)}},serialize(e,t){return"new URL("+t.serialize(e)+")"},deserialize(e,t){return new URL(t.deserialize(e))}},Nt=Bt;class Vt{constructor(t){this.reader=t.getReader(),this.buffer="",this.done=!1}async readChunk(){const t=await this.reader.read();t.done?this.done=!0:this.buffer+=new TextDecoder().decode(t.value)}async next(){if(this.buffer==="")return this.done?{done:!0,value:void 0}:(await this.readChunk(),await this.next());const t=Number.parseInt(this.buffer.substring(1,11),16);for(;t>this.buffer.length-12;){if(this.done)throw new Error("Malformed server function stream.");await this.readChunk()}const r=this.buffer.substring(12,12+t);return this.buffer=this.buffer.substring(12+t),{done:!1,value:gt(r)}}async drain(){for(;!(await this.next()).done;);}}async function Z(e,t){if(!t.body)throw new Error("missing body");const r=new Vt(t.body),i=await r.next();return i.done||r.drain().then(()=>{delete $R[e]},()=>{}),i.value}let Wt=0;function T(e,t,r,i){return fetch(e,{method:"POST",...i,headers:{...i.headers,"X-Server-Id":t,"X-Server-Instance":r}})}async function Y(e,t,r,i){const a=`server-fn:${Wt++}`,n=await(i.length===0?T(e,t,a,r):i.length===1&&i[0]instanceof FormData?T(e,t,a,{...r,body:i[0]}):T(e,t,a,{...r,body:JSON.stringify(await Promise.resolve(wt(i,{plugins:[Et,zt,At,Tt,B,N,Ct,_t,Lt,Nt]}))),headers:{...r.headers,"Content-Type":"application/json"}}));if(n.headers.get("Location")||n.headers.get("X-Revalidate")||n.headers.get("X-Single-Flight"))return n.body&&(n.customBody=()=>Z(a,n)),n;const o=n.headers.get("Content-Type");let s;if(o&&o.startsWith("text/plain")?s=await n.text():o&&o.startsWith("application/json")?s=await n.json():s=Z(a,n),n.ok)return s;throw s}function er(e,t,r){const i="/portfolio";return new Proxy(e,{get(a,n,o){if(n==="url")return`${i}/_server/?id=${encodeURIComponent(t)}&name=${encodeURIComponent(r)}`;if(n==="GET")return o.withOptions({method:"GET"});if(n==="withOptions")return s=>{const c=(...d)=>{const u=s.method&&s.method.toUpperCase()==="GET";return Y(u?o.url+(d.length?`&args=${JSON.stringify(d)}`:""):`${i}/_server`,`${t}#${r}`,s,u?[]:d)};return c.url=o.url,c}},apply(a,n,o){return Y(`${i}/_server`,`${t}#${r}`,{},o)}})}export{V as a,er as b,U as c,Xt as d,Ht as u};
